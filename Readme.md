# Task from job interview

## Формулировка задачи

Большинство веб-страниц сейчас перегружено всевозможной рекламой... Наша задача «вытащить»
из веб-страницы только полезную информацию, отбросив весь «мусор» (навигацию, рекламу и тд).

Полученный текст нужно отформатировать для максимально комфортного чтения в любом
текстовом редакторе. Правила форматирования: ширина строки не больше 80 символов (если
больше, переносим по словам), абзацы и заголовки отбиваются пустой строкой. Если в тексте
встречаются ссылки, то URL вставить в текст в квадратных скобках. Остальные правила на ваше
усмотрение.

Программа оформляется в виде утилиты командной строки, которой в качестве параметра
указывается произвольный URL. Она извлекает по этому URL страницу, обрабатывает ее и
формирует текстовый файл с текстом статьи, представленной на данной странице.

В качестве примера можно взять любую статью на *lenta.ru*, *gazeta.ru* и т.д.

Алгоритм должен быть максимально универсальным, то есть работать на большинстве сайтов.

**Усложнение задачи 1:** Имя выходного файла должно формироваться автоматически по URL.

Примерно так:
```bash
http://lenta.ru/news/2013/03/dtp/index.html => [CUR_DIR]/lenta.ru/news/2013/03/dtp/index.txt
```

**Усложнение задачи 2:** Программа должна поддаваться настройке – в отдельном файле/файлах
задаются шаблоны обработки страниц.

Требования к выполнению задачи
1. Задача выполняется на С++|Python с использованием классов. Не должно использоваться
сторонних библиотек, впрямую решающих задачу.
2. Предпочтительная среда выполнения – MS Windows.
3. Решение должно состоять из документа, описывающего алгоритм, исходных кодов
программы, исполняемого модуля.
4. Приложите список URL, на которых вы проверяли свое решение. И результаты проверки.
5. Желательно указать направление дальнейшего улучшения/развития программы.

## Результаты

### 1
> Задача выполняется на С++|Python с использованием классов. Не должно использоваться
сторонних библиотек, впрямую решающих задачу.

Задача выполнена на Python. Сторонние библиотеки перечислены в requirements.txt и test-requirements.txt.

## 2
> Предпочтительная среда выполнения – MS Windows.

В проект добавлен Dockerfile, позволяющий запустить утилиту на любой ОС, [поддерживаемой Docker CE](https://docs.docker.com/install/#supported-platforms)
```shell
# для запуска выполните:
make minify url="https://lenta.ru/articles/2018/08/23/roditeli_cet/"

# или:

docker build . -t mini_readability
docker run --rm --name mini_readability -v ${PWD}/data:/data -u $(id -u) mini_readability "https://lenta.ru/articles/2018/08/23/roditeli_cet/"
```

## 3
> Решение должно состоять из документа, описывающего алгоритм, исходных кодов
программы, исполняемого модуля.

Программа загружает данные по URL в память и находит полезную информацию по XPath (конфигурируется).
Полученные данные форматируются в зависимости от того, в каком HTML-блоке они найдены, и записываются в файл.

Исходные коды доступны на github.com

Логика по запуску на исполнение расположена в файле main.py

### 4
> Приложите список URL, на которых вы проверяли свое решение. И результаты проверки.

Проверка осуществлялась с помощью автоматизированных тестов. См. tests/test_minify.py и tests/samples
```shell
# для запуска тестов выполните:
make tests

# или:

docker build . -t mini_readability
docker run --rm --name mini_readability --entrypoint "python" mini_readability -m pytest ../tests/ -vv
```

### 5
> Желательно указать направление дальнейшего улучшения/развития программы.

* Добавление возможности простого расширения функциональности mini_readability пользователем. 
 Например, добавление фильтров результатов (функция на Python), обрабатывающих каждый найденный блок полезной информации и настраиваемых в config.yaml (по имени).
* Поддержка картинок, таблиц
* Использование форматирования в результатах (html/markdown)
* Хостинг минифицированных результатов
* Добавление WYSWYG-редактора результатов для ручного добавления/удаления блоков данных
